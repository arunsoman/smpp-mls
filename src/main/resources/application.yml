server:
  port: 2222
  shutdown: graceful

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus

smpp:
  default:
    system-type: "OTA"
    enquire-link-interval: 600000  # 600 seconds (10 minutes)
    reconnect-delay: 5000
    window-size: 100

  operators:
    roshan:
      host: "10.150.156.100"
      port: 20900
      bind-type: BIND_TRX  # Try BIND_RX or BIND_TRX if this doesn't work
      interface-version: 0x33  # SMPP 3.4, try 0x33 for 3.3 or 0x50 for 5.0
      sessions:
        - system-id: "SHAHY"
          password: "SHAHY"
          tps: 100
          system-type: "SMPP"
          service-type: ""  # Empty for default
          source-address: "545"  # Default originator/sender ID
      addr-ton: 1  # International
      addr-npi: 1  # ISDN
      address-range: ""
      bind-timeout: 5000  # 5 seconds
      connect-timeout: 5000  # 5 seconds
      request-expiry-timeout: 10000  # 10 seconds
      window-monitor-interval: 10000  # 10 seconds
      window-size: 1  # Start with 1, increase if needed
      window-wait-timeout: 20000  # 20 seconds
      reconnect-delay: 5000  # 5 seconds
      max-reconnect-delay: 300000  # 5 minutes
      reconnect-on-connection-loss: true
      prefixes: [ "93-79",  "93-72" ]

    mtn:
      host: "192.168.27.106"
      port: 9000
      sessions:
        - system-id: "Shahy-EVD"
          password: "Root@123"
          tps: 200
      system-type: "SMPP"
      prefixes: ["93-77", "93-76"]
#
    awcc:
      host: "43.250.139.33"
      port: 10396
      sessions:
        - system-id: "Shahy"
          password: "Sh@123"
          tps: 150
          service-type: ""  # Empty for default
          source-address: "Shahy"  # Default originator/sender ID
      system-type: "SMPP"
      prefixes: ["93-70", "93-71"]

    etisalat:
      host: "16.170.19.245"
      port: 2775
      sessions:
        - system-id: "EA_shahy"
          password: "es@3y!"
          tps: 150
          service-type: ""  # Empty for default
          source-address: "545"  # Default originator/sender ID
      system-type: "SMPP"
      prefixes: [ "93-73", "93-78" ]

#    etisalat:
#      host: "180.222.136.68"
#      port: 5016
#      sessions:
#        - system-id: "EA_shahy"
#          password: "es@3y!"
#          tps: 200
#      system-type: "SMPP"
#      prefixes: ["93-74", "93-75"]

  retry:
    max-attempts: 5
    base-delay-ms: 1000
    max-delay-ms: 60000

# Priority config sample
priority:
  high:
    max-tps-percentage: 20
    enabled: true

# API Security
api:
  security:
    enabled: false  # Set to true in production
    api-key: "test-api-key-12345"  # Default key for testing

# H2 Database Configuration
spring:
  datasource:
    url: jdbc:h2:mem:smppdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    username: sa
    password: password
    driver-class-name: org.h2.Driver
  h2:
    console:
      enabled: true
      path: /h2-console
      settings:
        web-allow-others: false
        trace: false
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        jdbc:
          time_zone: UTC
  lifecycle:
    timeout-per-shutdown-phase: 330s  # 300s for message wait + 30s buffer for cleanup

# Graceful Shutdown Configuration
shutdown:
  max-wait-seconds: 300  # Maximum time to wait for message completion (5 minutes)
  interactive: false     # Set to true only for interactive console environments
